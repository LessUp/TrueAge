# 真实生理年龄估算器（True Age）

一个基于浏览器的静态应用（HTML + Tailwind CDN + 原生 JS），输入关键生理与生活方式指标，估算“生理年龄”，并提供可解释的贡献分解与改进建议。内置若干趣味健康测试：生活方式年龄、心肺适能（CRF）年龄、睡眠评分。

## 功能特性

- 生理年龄估算：多指标标准化差异 + 加权，输出生理年龄、相对物理年龄、可信度。
- 解释性：主要贡献因子的“±年龄”影响，便于理解改进方向。
- 生活方式年龄：活动量、饮食、吸烟、酒精、久坐综合评分转化为“生活方式年龄”。
- 心肺适能年龄：基于 VO2max（或由 RHR 估算 VO2max）换算为“适能年龄”。
- 睡眠评分：结合时长目标区间与不良习惯、主观质量，输出分数与等级。
- 单位换算与派生：mg/dL ↔ mmol/L、BMI/WHtR、eGFR（CKD-EPI 2021）。
- 数据与分享：本地保存/读取、JSON 导入/导出、一键复制结果摘要、复制携带状态的分享链接、URL 自动加载状态。

## 使用说明

1. 打开 `index.html` 即可使用（双击或浏览器打开）。
2. 在左侧表单填写基础信息、生命体征与实验室指标，或点击“填充示例”。
3. 点击“计算生理年龄”，右侧显示生理年龄、可信度、主要贡献因子与建议。
4. 在“趣味健康测试”中：
   - 生活方式年龄：填写卡片内的输入，点击“计算”。
   - 心肺适能年龄：直接点击“计算”（使用上方年龄、性别与 VO2max/RHR）。
   - 睡眠评分：填写卡片内的输入，点击“计算”。
5. 在“数据与分享”区：
   - 保存到本地/从本地读取（localStorage）。
   - 导出/导入 JSON 文件。
   - 复制结果摘要（便于粘贴到聊天/邮件）。
   - 复制带参数的分享链接。打开该链接会自动加载页面状态并计算结果。

## 算法设计要点

- 指标集合：体成分与分布（BMI、WHtR）、血压/心率（SBP、DBP、RHR）、心肺适能（VO2max）、血脂（HDL、LDL、TG）、糖代谢（FPG、HbA1c）、炎症（hs-CRP）、肾功能（eGFR）、肝功能（ALT、AST）、尿酸、睡眠时长。
- 方向：VO2max/HDL/eGFR/睡眠为“高更好”；SBP/DBP/LDL/TG/HbA1c/FPG/CRP/BMI/WHtR/ALT/AST/尿酸/RHR为“高更差”。
- 目标与SD：在 `app.js` 的 `buildMetricDefs()` 中设定，可按人群微调。
- 加权：按可用指标归一化权重求和；每1个标准差约折算±5岁；裁剪z到[-3,3]。
- 可信度：依据覆盖权重、可用指标数量等估计，0–100%。
- 解释性：列出影响“变老”或“变年轻”的Top因子与目标差异。
- 趣味测试：
  - 生活方式年龄：将运动量、蔬果、吸烟、酒精、久坐映射到0–100分加权，分数偏低→年龄偏高。
  - 心肺适能年龄：以性别基准VO2max与衰减率估算；若缺失VO2max，则以RHR估算VO2max。
  - 睡眠评分：7–9小时为最佳区间，结合习惯/风险与主观质量给分与等级。

## 科学依据与参考文献

本项目定位为偏「趣味科普」的工具，但背后的指标选择和阈值并不是拍脑袋，而是大致参考了主流指南和大型人群研究。下面是一个精简版的说明，方便感兴趣的用户进一步了解。

### 核心指标与参考范围（精简版）

| 指标 | TrueAge 目标值（近似） | 为什么重要（简要说明） | 主要参考来源 |
| ---- | ---------------------- | ---------------------- | ------------ |
| BMI（体重指数） | ≈22 kg/m² | 大量随访研究显示，成人 BMI 在约 20–25 区间时总死亡和多种慢病风险较低。 | 世界卫生组织肥胖与体重指数报告等[1] |
| 腰高比 WHtR | ≈0.46（目标 <0.5） | 腰围反映内脏脂肪，WHtR 高于 0.5 与心血管事件、糖尿病等风险升高相关。 | 关于 WHtR 与心代谢风险的系统综述[1] |
| 血压 SBP/DBP | ≈110/70 mmHg | 和高血压诊断阈值不同，这里取的是健康成人人群中事件风险较低的一段区间。 | 各类高血压防治指南与人群研究[1] |
| 静息心率 RHR | ≈60 bpm | 静息心率越高，代表交感激活更强、心肺储备较低，与更高的心血管和全因死亡风险相关。 | 心血管流行病学研究[1] |
| VO2max（最大摄氧量） | 男性 ≈40–50，女性 ≈35–45 ml/kg/min | 反映心肺系统把氧输送到肌肉的能力，被认为是预测寿命和心血管事件最强的单一体力指标之一。 | 心肺适能与死亡风险综述[5] |
| 血脂（LDL / HDL / TG） | LDL 偏低、HDL 稍高、TG 偏低 | 「坏胆固醇」LDL 越高、TG 升高，与动脉粥样硬化和心血管事件风险升高相关；HDL 偏高通常更有利。 | 心血管预防与血脂管理指南（如 ESC/ACC）[1] |
| 血糖 / HbA1c | FPG ≈85 mg/dL，HbA1c ≈5.2% | 空腹血糖和 HbA1c 升高，与 2 型糖尿病及其并发症风险显著相关。TrueAge 目标值对应「正常」范围的中下段。 | ADA 等糖尿病诊疗指南[1] |
| eGFR（肾小球滤过率） | ≈100 mL/min/1.73m² | 反映肾脏过滤功能，eGFR 降低与心血管事件、死亡和多系统并发症风险相关。TrueAge 使用 CKD-EPI 2021 公式估算。 | CKD-EPI 2021 方程研究[1] |
| 炎症与肝酶（hs-CRP、ALT、AST） | 低正常范围 | 慢性低度炎症（hs-CRP 升高）与心血管、代谢综合征风险相关；肝酶异常提示脂肪肝、酒精相关或其他肝病风险。 | 炎症与心代谢风险的队列研究[1] |
| 尿酸 | 正常偏低 | 尿酸升高与痛风、肾结石以及部分心代谢风险升高有关。 | 代谢综合征与高尿酸血症研究[1] |
| 睡眠时长 | ≈7–9 小时/晚 | 多项前瞻性队列和荟萃分析显示，过短（如 <6 小时）或过长（>9–10 小时）睡眠都与全因死亡风险增加相关，约 7 小时风险最低。 | 睡眠时长与死亡/心血管事件的 meta 分析[6] |

上表中的目标值和范围，是根据不同研究和指南整理出的「健康成人大致最优区间」，并结合日常可操作性做了简化和折中，**并非针对某一具体人群或疾病的诊疗标准**。

### 生理年龄算法与现有研究的关系（通俗版）

学术研究中，生物学/生理年龄有多种计算方法，例如：

- 一些方法（如 Klemera & Doubal 方法, 2006 年）用多种生理指标一起回归得到一个「最符合这些指标的年龄」，并在老年队列中验证对死亡和疾病的预测能力[2]。
- 也有方法（如 Levine 等在 PLoS Medicine 上提出的 Phenotypic Age 指标）基于美国 NHANES 等大型人群数据，用 Cox 回归从几十个血液指标中筛选出一小组关键指标，构建与死亡风险高度相关的「表型年龄」[3]。

TrueAge 没有试图复刻某一篇论文的完整算法，而是**借鉴了「多指标标准化差异 + 加权求和」这一通用思路**：

- 每个指标先和一个「目标值」比较，按标准差换算成 z 分数，再按权重合成为一个总的「变老/变年轻」信号。
- 最终把这个信号换算成「±几岁」的形式，得到生理年龄和相对物理年龄差。

与严肃科研模型的区别在于：

- TrueAge 的目标是做一个**面向大众的健康科普与自我管理工具**，并没有在特定人群的大样本队列上进行正式的参数拟合和外部验证。
- 它更像是「把多项常见检查结果合并成一个直观、可解释的健康评分」，帮助用户理解优先改进的方向，而不是给出医学诊断或精确预测某种疾病的绝对风险。

### 三个趣味测试的科学背景（简要）

#### 1. 生活方式年龄

- **体力活动与久坐**：世界卫生组织 2020 年发布的体力活动与久坐行为指南建议，成人每周应进行至少 150–300 分钟中等强度有氧活动（或等量高强度活动），与较低的全因死亡、心血管疾病和 2 型糖尿病风险相关[4]。同时，**长时间久坐（特别是 >8–10 小时/天）** 在多项观察性研究中与更高的死亡风险相关。
- **饮食**：每日摄入约 ≥5 份蔬果、减少加工肉类和含糖饮料，与更低的心血管和代谢疾病风险相关，多项队列研究和膳食指南都有类似结论[1]。
- **吸烟与酒精**：吸烟在几乎所有人群研究中都与更高的全因死亡和疾病负担相关；戒烟能显著降低风险。近年来多项大型队列与荟萃分析表明，酒精的「保护」作用被明显弱化，整体趋势更倾向于「低至无摄入」更安全[1]。

TrueAge 将这些因素映射到 0–100 分的生活方式得分，再换算为「生活方式年龄」，让用户直观感受生活习惯对健康年龄的影响。

#### 2. 心肺适能年龄（CRF 年龄）

- **心肺适能的重要性**：最大摄氧量 VO2max 或综合心肺适能（Cardiorespiratory Fitness, CRF），在多项研究中被认为是**预测全因死亡和心血管死亡最强的单一体力指标之一**[5]。
- **RHR 估算 VO2max 的思路**：在缺乏实验室心肺运动试验的情况下，有研究提出可以用「最大心率 HRmax 与静息心率 RHR 的比值」粗略估算 VO2max，例如 Uth 等人在 2000 年代提出的近似公式 VO2max ≈ 15.3 × (HRmax / RHR)[5]。TrueAge 在缺少 VO2max 时，借用这一思路做一个**科普级别的估算**，不用于临床决策。

因此，CRF 年龄主要用来帮助用户**理解自己当前心肺适能大致处在什么水平段**，以及与同龄人相比是偏高还是偏低，而不是一个严格的医学年龄判断。

#### 3. 睡眠评分

- **睡眠时长**：多项前瞻性队列和荟萃分析发现，睡眠过短（例如 <6 小时/晚）和过长（>9–10 小时/晚）都与全因死亡和心血管事件风险升高相关，约 7 小时/晚附近往往是风险最低的区间[6]。因此 TrueAge 把 7–9 小时设为「理想区间」。
- **睡眠规律性与习惯**：最新研究提示，**睡眠时间是否规律（每天入睡和起床时间是否接近）**，对长期健康和死亡风险甚至可能比单纯平均时长更重要[7]。TrueAge 在睡眠评分中单独加入了「规律天数/周」，并考虑了下午之后咖啡因摄入、睡前使用电子屏幕、打鼾/睡眠呼吸暂停风险和主观休息感等因素，用来鼓励更健康的睡眠行为模式。

### 参考文献（精选，非完整列表）

[1] 世界卫生组织及多国指南与综述文献，关于体重指数、腰高比、血压、血脂、血糖、肾功能、饮食与吸烟/酒精等对心血管和代谢健康影响的总结报告。

[2] Klemera P, Doubal S. A new approach to the concept and computation of biological age. Mech Ageing Dev. 2006;127(3):240-248.

[3] Levine ME. A new aging measure captures morbidity and mortality risk across the life course. PLoS Med. 2018;15(12):e1002718.

[4] World Health Organization. WHO Guidelines on Physical Activity and Sedentary Behaviour. Geneva: WHO; 2020.

[5] 例如：关于最大摄氧量与全因死亡关系的综述文章，以及基于 HRmax 与 RHR 比值估算 VO2max 的方法研究（如 Uth 等人的工作）。

[6] 例如：Liu TZ 等发表于 Journal of the American Heart Association 的系统综述与剂量-反应 meta 分析，探讨睡眠时长与全因死亡及心血管事件风险的关系。

[7] Huang T 等. Sleep regularity is a stronger predictor of mortality risk than sleep duration. SLEEP. 2023;47(1):zsad253.

## 设计原则

- 前端纯静态，无后端依赖，易部署、易分享。
- UI 采用 Tailwind CDN，轻量、现代、美观。
- 结果仅用于健康管理与教育，不构成医疗诊断或治疗建议。

## 部署设计

- 纯静态资源：`index.html`、`app.js`。
- 推荐的几种部署方式：
  - 本地预览：
    - macOS/Linux: `python3 -m http.server 8080`（在项目目录运行），浏览器打开 `http://localhost:8080/`。
    - Node: `npx serve .` 或使用任意静态服务器工具。
  - Netlify（零配置）：
    - 新建站点，指向仓库或拖拽 `index.html` 与 `app.js`。
    - 构建命令留空，发布目录为项目根目录。
  - GitHub Pages：
    - 将项目推送到 GitHub 仓库，开启 Pages 并指向分支根目录。
  - Vercel：
    - 新建项目，框架选择“其他”，构建与输出目录留空，直接部署静态资源。

### 路由与分享链接

- 应用通过 URL 查询参数承载页面状态，复制分享链接即可复现表单状态并自动计算。
- 生产部署建议：
  - 配置 404 回退到 `index.html`（Netlify `_redirects` 或 Vercel `routes` 可选），以保证单页面分享链接可直接打开。

## 本地开发建议

- 直接编辑 `index.html` 与 `app.js`，保存后刷新浏览器即可。
- 若需要扩展指标或权重，修改 `buildMetricDefs()` 中的 `targets/sds/weights/dirs/labels`。
- 若需要新增趣味测试，参照现有三张卡片的结构与函数命名风格。

## 隐私与数据

- 数据默认保存在浏览器内存；“保存到本地”使用 localStorage。
- 导出/导入 JSON 全程在本地浏览器完成，不上传到服务器。

## 免责声明

- 本工具不提供医疗诊断或治疗建议，任何指标异常请咨询专业医生。

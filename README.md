# 真实生理年龄估算器（True Age）

一个基于浏览器的静态应用（HTML + Tailwind CDN + 原生 JS），输入关键生理与生活方式指标，估算“生理年龄”，并提供可解释的贡献分解与改进建议。内置若干趣味健康测试：生活方式年龄、心肺适能（CRF）年龄、睡眠评分。

## 功能特性

- 生理年龄估算：多指标标准化差异 + 加权，输出生理年龄、相对物理年龄、可信度。
- 解释性：主要贡献因子的“±年龄”影响，便于理解改进方向。
- 生活方式年龄：活动量、饮食、吸烟、酒精、久坐综合评分转化为“生活方式年龄”。
- 心肺适能年龄：基于 VO2max（或由 RHR 估算 VO2max）换算为“适能年龄”。
- 睡眠评分：结合时长目标区间与不良习惯、主观质量，输出分数与等级。
- 单位换算与派生：mg/dL ↔ mmol/L、BMI/WHtR、eGFR（CKD-EPI 2021）。
- 数据与分享：本地保存/读取、JSON 导入/导出、一键复制结果摘要、复制携带状态的分享链接、URL 自动加载状态。

## 使用说明

1. 打开 `index.html` 即可使用（双击或浏览器打开）。
2. 在左侧表单填写基础信息、生命体征与实验室指标，或点击“填充示例”。
3. 点击“计算生理年龄”，右侧显示生理年龄、可信度、主要贡献因子与建议。
4. 在“趣味健康测试”中：
   - 生活方式年龄：填写卡片内的输入，点击“计算”。
   - 心肺适能年龄：直接点击“计算”（使用上方年龄、性别与 VO2max/RHR）。
   - 睡眠评分：填写卡片内的输入，点击“计算”。
5. 在“数据与分享”区：
   - 保存到本地/从本地读取（localStorage）。
   - 导出/导入 JSON 文件。
   - 复制结果摘要（便于粘贴到聊天/邮件）。
   - 复制带参数的分享链接。打开该链接会自动加载页面状态并计算结果。

## 算法设计要点

- 指标集合：体成分与分布（BMI、WHtR）、血压/心率（SBP、DBP、RHR）、心肺适能（VO2max）、血脂（HDL、LDL、TG）、糖代谢（FPG、HbA1c）、炎症（hs-CRP）、肾功能（eGFR）、肝功能（ALT、AST）、尿酸、睡眠时长。
- 方向：VO2max/HDL/eGFR/睡眠为“高更好”；SBP/DBP/LDL/TG/HbA1c/FPG/CRP/BMI/WHtR/ALT/AST/尿酸/RHR为“高更差”。
- 目标与SD：在 `app.js` 的 `buildMetricDefs()` 中设定，可按人群微调。
- 加权：按可用指标归一化权重求和；每1个标准差约折算±5岁；裁剪z到[-3,3]。
- 可信度：依据覆盖权重、可用指标数量等估计，0–100%。
- 解释性：列出影响“变老”或“变年轻”的Top因子与目标差异。
- 趣味测试：
  - 生活方式年龄：将运动量、蔬果、吸烟、酒精、久坐映射到0–100分加权，分数偏低→年龄偏高。
  - 心肺适能年龄：以性别基准VO2max与衰减率估算；若缺失VO2max，则以RHR估算VO2max。
  - 睡眠评分：7–9小时为最佳区间，结合习惯/风险与主观质量给分与等级。

## 设计原则

- 前端纯静态，无后端依赖，易部署、易分享。
- UI 采用 Tailwind CDN，轻量、现代、美观。
- 结果仅用于健康管理与教育，不构成医疗诊断或治疗建议。

## 部署设计

- 纯静态资源：`index.html`、`app.js`。
- 推荐的几种部署方式：
  - 本地预览：
    - macOS/Linux: `python3 -m http.server 8080`（在项目目录运行），浏览器打开 `http://localhost:8080/`。
    - Node: `npx serve .` 或使用任意静态服务器工具。
  - Netlify（零配置）：
    - 新建站点，指向仓库或拖拽 `index.html` 与 `app.js`。
    - 构建命令留空，发布目录为项目根目录。
  - GitHub Pages：
    - 将项目推送到 GitHub 仓库，开启 Pages 并指向分支根目录。
  - Vercel：
    - 新建项目，框架选择“其他”，构建与输出目录留空，直接部署静态资源。

### 路由与分享链接

- 应用通过 URL 查询参数承载页面状态，复制分享链接即可复现表单状态并自动计算。
- 生产部署建议：
  - 配置 404 回退到 `index.html`（Netlify `_redirects` 或 Vercel `routes` 可选），以保证单页面分享链接可直接打开。

## 本地开发建议

- 直接编辑 `index.html` 与 `app.js`，保存后刷新浏览器即可。
- 若需要扩展指标或权重，修改 `buildMetricDefs()` 中的 `targets/sds/weights/dirs/labels`。
- 若需要新增趣味测试，参照现有三张卡片的结构与函数命名风格。

## 隐私与数据

- 数据默认保存在浏览器内存；“保存到本地”使用 localStorage。
- 导出/导入 JSON 全程在本地浏览器完成，不上传到服务器。

## 免责声明

- 本工具不提供医疗诊断或治疗建议，任何指标异常请咨询专业医生。
